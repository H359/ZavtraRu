<%inherit file="../base.html" />
<%block name="main_column">
<h3>Поиск</h3>
<div>
    <ul class="breadcrumb">
	<li><a href="/">Главная</a><span class="divider">/</span></li>
	<li>Поиск</li>
    </ul>
    <form method="get" action="." class="clearfix search-form">
	<fieldset>
	    <div>
		<input class="searchfield" type="search" name="q"  value="${ query | h }" />
		<input class="btn small primary" type="submit" value="Найти" />
	    </div>
	    <div class="clearfix">
		Искать по:
		<div class="input">
		    <div class="inputs-list">
		    <label for="search-rank-phrase">
			<input type="radio" name="rankmode" value="phrase" id="search-rank-phrase">
			<span>по наличию целой фразы в статье</span>
		    </label>
		    <label for="search-rank-any">
			<input type="radio" name="rankmode" value="any" id="search-rank-any">
			<span>по наличию любого из слов в статье</span>
		    </label>
		    <label for="search-rank-all">
			<input type="radio" name="rankmode" value="all" id="search-rank-all">
			<span>по наличию всех слов в статье, невзирая на их расположение</span>
		    </label>
		    </div>
		</div>
	    </div>
	</fieldset>
    </form>

    <div class="content">
	<ul class="unstyled articles">
	% for item in object_list:
	    <% url = item.get_absolute_url() %>\
	    <li class="ym-clearfix">
		<h4><a href="${ url }">${ item.title }</a></h4>
		% if item.subtitle:
		<h5><a href="${ url }">${ item.subtitle }</a></h5>
		% endif
		<div data-clickable="${ url }" class="article-text">${ item.description }</div>
		<div class="comments-count"><a href="${ url }#comments">${ self.comments_count(item.comments_count) }</a></div>
	    </li>
	% endfor
	</ul>
	% if is_paginated:
	<div class="pagination">
	    <ul>
	        <li class="prev<% if not page_obj.has_previous(): context.write(' disabled') %>"><a rel="page" href="?q=${ query | h }&amp;page=${ page_obj.previous_page_number() }">&larr; Позже</a></li>
		% for p in page_obj.page_range:
		<li<% if page_obj.number == p: context.write(' class="active"') %>">
		% if p:
		<a rel="page" href="?q=${ query | h }&amp;page=${ p }">${ p }</a>
		% else:
		<a>...</a>
		% endif:
		</li>
		% endfor
		<li class="next<% if not page_obj.has_next(): context.write(' disabled') %>"><a rel="page" href="?q=${ query | h }&amp;page=${ page_obj.next_page_number() }">Раньше &rarr;</a></li>
	    </ul>
	</div>
	% endif
    </div>
</div>
</%block>